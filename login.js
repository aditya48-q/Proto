import { auth } from \'./firebase.js\';\nimport { signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";\n\ndocument.addEventListener(\'DOMContentLoaded\', () => {\n    const loginForm = document.getElementById(\'login-form\');\n    const loginButton = document.getElementById(\'login-button\');\n    const emailInput = document.getElementById(\'login-email\');\n    const passwordInput = document.getElementById(\'login-password\');\n    const emailError = document.getElementById(\'email-error\');\n    const passwordError = document.getElementById(\'password-error\');\n    const loadingSpinner = document.querySelector(\'.loading-spinner\');\n    const passwordToggle = document.querySelector(\'.password-toggle\');\n    const eyeIcon = document.querySelector(\'.eye-icon\');\n    const eyeOffIcon = document.querySelector(\'.eye-off-icon\');\n\n    // Password visibility toggle\n    passwordToggle.addEventListener(\'click\', () => {\n        if (passwordInput.type === \'password\') {\n            passwordInput.type = \'text\';\n            eyeIcon.style.display = \'none\';\n            eyeOffIcon.style.display = \'block\';\n        } else {\n            passwordInput.type = \'password\';\n            eyeIcon.style.display = \'block\';\n            eyeOffIcon.style.display = \'none\';\n        }\n    });\n\n    const validateEmail = (email) => {\n        const re = /^(([^<>()[\]\\\\.,;:\\s@"]+(\\.[^<>()[\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(String(email).toLowerCase());\n    };\n\n    const showError = (input, errorElement, message) => {\n        input.classList.add(\'invalid\');\n        errorElement.textContent = message;\n        errorElement.classList.add(\'visible\');\n    };\n\n    const clearError = (input, errorElement) => {\n        input.classList.remove(\'invalid\');\n        errorElement.classList.remove(\'visible\');\n        errorElement.textContent = \'\';\n    };\n\n    emailInput.addEventListener(\'input\', () => clearError(emailInput, emailError));\n    passwordInput.addEventListener(\'input\', () => clearError(passwordInput, passwordError));\n\n    loginForm.addEventListener(\'submit\', (e) => {\n        e.preventDefault();\n        let isValid = true;\n\n        clearError(emailInput, emailError);\n        clearError(passwordInput, passwordError);\n\n        const email = emailInput.value.trim();\n        const password = passwordInput.value.trim();\n\n        if (email === \'\') {\n            showError(emailInput, emailError, \'Email cannot be empty.\');\n            isValid = false;\n        } else if (!validateEmail(email)) {\n            showError(emailInput, emailError, \'Please enter a valid email address.\');\n            isValid = false;\n        }\n\n        if (password === \'\') {\n            showError(passwordInput, passwordError, \'Password cannot be empty.\');\n            isValid = false;\n        }\n\n        if (!isValid) {\n            return;\n        }\n\n        loadingSpinner.style.display = \'block\';\n        loginButton.disabled = true;\n\n        signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                window.location.href = \'dashboard.html\';\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                if (errorCode === \'auth/user-not-found\' || errorCode === \'auth/wrong-password\' || errorCode === \'auth/invalid-credential\') {\n                    showError(emailInput, emailError, \' \'); // Clear previous to re-animate\n                    showError(passwordInput, passwordError, \'Invalid credentials. Please try again.\');\n                } else {\n                    showError(passwordInput, passwordError, \'An unknown error occurred.\');\n                }\n            })\n            .finally(() => {\n                loadingSpinner.style.display = \'none\';\n                loginButton.disabled = false;\n            });\n    });\n});\n